<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Tue Sep 29 23:36:01 BST 2015 -->
<title>Data</title>
<meta name="date" content="2015-09-29">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Data";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Data.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../suncertify/db/DatabaseConstants.html" title="interface in suncertify.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">suncertify.db</div>
<h2 title="Class Data" class="title">Class Data</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>suncertify.db.Data</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a>, <a href="../../suncertify/db/IDatabase.html" title="interface in suncertify.db">IDatabase</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">Data</span>
extends java.lang.Object
implements <a href="../../suncertify/db/IDatabase.html" title="interface in suncertify.db">IDatabase</a></pre>
<div class="block">The <code>Data</code> class implements <code>IDatabase</code> which extends
 <code>DBMain</code> interface. It implements all methods required by the sun
 interface. It is instantiated when the OK button is clicked for whichever
 configuration dialog is launched (either standalone, server, or client mode).
 The specific configuration dialog OK button listener has a method called
 getService, see <a href="../../suncertify/ui/listeners/OKButtonListener.html#getService()"><code>OKButtonListener.getService()</code></a> which creates an
 instance of this class and passes it to the relevant business service. The
 business service then communicates with the persistence layer via this
 object.

 When first instantiated all records are read from the database into a
 singleton cache object and this is used throughout the application to update
 and retrieve data. This cache is then flushed back to disk when the
 application terminates. In order to guarantee database integrity all writes
 to this cache are synchronized. This class uses a Facade design pattern by
 delegating both data management and locking responsibilities to other helper
 classes.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Kieran O'Brien</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../suncertify/db/Data.html#Data(java.lang.String)">Data</a></strong>(java.lang.String&nbsp;databasePath)</code>
<div class="block">Constructs a new <code>Data</code> object.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#create(java.lang.String[])">create</a></strong>(java.lang.String[]&nbsp;data)</code>
<div class="block">Creates a new record in the database (possibly reusing a deleted entry).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#delete(int)">delete</a></strong>(int&nbsp;recNo)</code>
<div class="block">Marks a subcontractor record as deleted, making the record number and
 associated disk storage available for reuse.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#find(java.lang.String[])">find</a></strong>(java.lang.String[]&nbsp;criteria)</code>
<div class="block">Returns an array of record numbers that match the specified criteria.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#isLocked(int)">isLocked</a></strong>(int&nbsp;recNo)</code>
<div class="block">Determines if a record is currently locked.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#lock(int)">lock</a></strong>(int&nbsp;recNo)</code>
<div class="block">Locks a record so that it can only be updated or deleted by this client.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#read(int)">read</a></strong>(int&nbsp;recNo)</code>
<div class="block">Reads a subcontractor record from the cache if it exists and returns a
 string array of all the fields of this subcontractor</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#saveData()">saveData</a></strong>()</code>
<div class="block">Saves the data to disk when the application terminates</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#unlock(int)">unlock</a></strong>(int&nbsp;recNo)</code>
<div class="block">Releases the lock on a record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/Data.html#update(int,%20java.lang.String[])">update</a></strong>(int&nbsp;recNo,
      java.lang.String[]&nbsp;data)</code>
<div class="block">Modifies the fields of an existing subcontractor record in cache.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Data(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Data</h4>
<pre>public&nbsp;Data(java.lang.String&nbsp;databasePath)
     throws <a href="../../suncertify/db/DatabaseException.html" title="class in suncertify.db">DatabaseException</a></pre>
<div class="block">Constructs a new <code>Data</code> object. This constructor takes as an
 argument the absolute path to the database file. This path should be read
 in from the configuration dialog relevant to whichever mode is being run

 This constructor also initializes the first connection to the database
 file using <code>DBFileManager</code> and creates a singleton instance of
 cache, populating it with records from the database file</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>databasePath</code> - The absolute path to the database file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DatabaseException.html" title="class in suncertify.db">DatabaseException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;read(int&nbsp;recNo)
                        throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Reads a subcontractor record from the cache if it exists and returns a
 string array of all the fields of this subcontractor</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#read(int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to read</dd>
<dt><span class="strong">Returns:</span></dt><dd>String array representation of a Subcontractor object where each
         subcontractor field n appears in array[n].</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="update(int, java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update(int&nbsp;recNo,
          java.lang.String[]&nbsp;data)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Modifies the fields of an existing subcontractor record in cache. The new
 values for field n appears in data[n]. NOTE: If an update is made to the
 name and/or location (data[0] and/or data [1]) the existing record number
 will no longer be valid as this is generated off of these fields, to
 avoid duplicate record numbers this subcontractor will be removed from
 the cache and the new record number and corresponding contractor will be
 added</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#update(int,%20java.lang.String[])">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to update</dd><dd><code>data</code> - String array of values where each subcontractor field n
            appears in array[n].</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="delete(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(int&nbsp;recNo)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Marks a subcontractor record as deleted, making the record number and
 associated disk storage available for reuse.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#delete(int)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to delete</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="find(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>public&nbsp;int[]&nbsp;find(java.lang.String[]&nbsp;criteria)
           throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Returns an array of record numbers that match the specified criteria.
 Field n in the database file is described by criteria[n]. A null value in
 criteria[n] matches any field value. A non-null value in criteria[n]
 matches any field value that begins with criteria[n]. (For example,
 "Fred" matches "Fred" or "Freddy".)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#find(java.lang.String[])">find</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>criteria</code> - String array of search criteria. NOTE: This must not exceed a
            length of 7</dd>
<dt><span class="strong">Returns:</span></dt><dd>The integer array of all matching record numbers</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="create(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;int&nbsp;create(java.lang.String[]&nbsp;data)
           throws <a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></pre>
<div class="block">Creates a new record in the database (possibly reusing a deleted entry).
 Inserts the given data, and returns the record number of the new record.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#create(java.lang.String[])">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - String array of the new record to create. NOTE: This must not
            exceed a length of 6</dd>
<dt><span class="strong">Returns:</span></dt><dd>the record number of the newly created record</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></code></dd></dl>
</li>
</ul>
<a name="lock(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>public&nbsp;void&nbsp;lock(int&nbsp;recNo)
          throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Locks a record so that it can only be updated or deleted by this client.
 If the specified record is already locked, the current thread gives up
 the CPU and consumes no CPU cycles until the record is unlocked.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#lock(int)">lock</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to lock for this client</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="unlock(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>public&nbsp;void&nbsp;unlock(int&nbsp;recNo)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Releases the lock on a record.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#unlock(int)">unlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to unlock for this client</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="isLocked(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocked</h4>
<pre>public&nbsp;boolean&nbsp;isLocked(int&nbsp;recNo)
                 throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Determines if a record is currently locked. Returns true if the record is
 locked, false otherwise.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/DBMain.html#isLocked(int)">isLocked</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/DBMain.html" title="interface in suncertify.db">DBMain</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - The record number to check if locked</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if locked, false if not locked</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="saveData()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>saveData</h4>
<pre>public&nbsp;void&nbsp;saveData()
              throws <a href="../../suncertify/db/DatabaseException.html" title="class in suncertify.db">DatabaseException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../suncertify/db/IDatabase.html#saveData()">IDatabase</a></code></strong></div>
<div class="block">Saves the data to disk when the application terminates</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../suncertify/db/IDatabase.html#saveData()">saveData</a></code>&nbsp;in interface&nbsp;<code><a href="../../suncertify/db/IDatabase.html" title="interface in suncertify.db">IDatabase</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DatabaseException.html" title="class in suncertify.db">DatabaseException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Data.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../suncertify/db/DatabaseConstants.html" title="interface in suncertify.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
